--// LynxIT | Visual Script v2 (Original Style Restored)

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local LP = Players.LocalPlayer

local petType = "NP"
local buttonTypes = {"NP", "F", "R", "FR", "N", "NR", "NF", "NFR", "M", "MR", "MF", "MFR"}
local buttons = {}

local GUI = Instance.new("ScreenGui", LP:WaitForChild("PlayerGui"))
GUI.Name = "LynxITVisual"
GUI.ResetOnSpawn = false

local Frame = Instance.new("Frame", GUI)
Frame.Size = UDim2.new(0, 480, 0, 310)
Frame.Position = UDim2.new(0.5, -240, 0.5, -155)
Frame.AnchorPoint = Vector2.new(0.5, 0.5)
Frame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
Frame.BorderSizePixel = 0
Instance.new("UIStroke", Frame).Color = Color3.fromRGB(0, 255, 100)

-- Title
local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Text = "LynxIT | Visual Script v2"
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(0, 255, 100)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20

-- Author
local Author = Instance.new("TextLabel", Frame)
Author.Size = UDim2.new(1, 0, 0, 18)
Author.Position = UDim2.new(0, 0, 0, 30)
Author.Text = "@bannedPaul._"
Author.BackgroundTransparency = 1
Author.TextColor3 = Color3.fromRGB(200, 200, 200)
Author.Font = Enum.Font.Gotham
Author.TextSize = 14

-- Dragging
local dragging, dragStart, startPos
Frame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = Frame.Position
	end
end)
Frame.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
end)
UIS.InputChanged:Connect(function(input)
	if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
		local delta = input.Position - dragStart
		Frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)

-- Toggle with CTRL
UIS.InputBegan:Connect(function(input, gp)
	if input.KeyCode == Enum.KeyCode.LeftControl and not gp then
		Frame.Visible = not Frame.Visible
	end
end)

-- Reset Button Colors
local function resetColors()
	for _, b in pairs(buttons) do
		b.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	end
end

-- Buttons
for i, t in ipairs(buttonTypes) do
	local btn = Instance.new("TextButton", Frame)
	btn.Size = UDim2.new(0, 100, 0, 28)
	btn.Position = UDim2.new(0, 10 + ((i - 1) % 4) * 110, 0, 55 + math.floor((i - 1) / 4) * 35)
	btn.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	btn.Text = t
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 14
	btn.BorderSizePixel = 0
	Instance.new("UIStroke", btn).Color = Color3.fromRGB(0, 255, 100)

	btn.MouseButton1Click:Connect(function()
		resetColors()
		btn.BackgroundColor3 = Color3.fromRGB(0, 100, 50)
		petType = t
	end)

	table.insert(buttons, btn)
end

-- Pet Name Input
local NameBox = Instance.new("TextBox", Frame)
NameBox.Size = UDim2.new(0, 460, 0, 28)
NameBox.Position = UDim2.new(0, 10, 1, -65)
NameBox.PlaceholderText = "Enter Pet Name"
NameBox.Font = Enum.Font.Gotham
NameBox.TextSize = 14
NameBox.TextColor3 = Color3.fromRGB(255, 255, 255)
NameBox.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
NameBox.BorderSizePixel = 0
Instance.new("UIStroke", NameBox).Color = Color3.fromRGB(0, 255, 100)

-- Spawn Button
local Spawn = Instance.new("TextButton", Frame)
Spawn.Size = UDim2.new(0, 200, 0, 30)
Spawn.Position = UDim2.new(0.5, -100, 1, -30)
Spawn.Text = "Spawn Pet"
Spawn.Font = Enum.Font.GothamBold
Spawn.TextSize = 14
Spawn.TextColor3 = Color3.fromRGB(255, 255, 255)
Spawn.BackgroundColor3 = Color3.fromRGB(0, 100, 50)
Instance.new("UIStroke", Spawn).Color = Color3.fromRGB(0, 255, 100)
Spawn.BorderSizePixel = 0

-- Footer Discord Info
local Discord = Instance.new("TextLabel", Frame)
Discord.Size = UDim2.new(1, 0, 0, 18)
Discord.Position = UDim2.new(0, 0, 1, -15)
Discord.Text = "discord.gg/lynxit"
Discord.BackgroundTransparency = 1
Discord.TextColor3 = Color3.fromRGB(150, 255, 150)
Discord.Font = Enum.Font.Gotham
Discord.TextSize = 13

-- Logic
local function generate_props()
	return {
		flyable = petType:find("F") ~= nil,
		rideable = petType:find("R") ~= nil,
		neon = petType:find("N") and not petType:find("M"),
		mega_neon = petType:find("M") ~= nil,
		age = 1
	}
end

local function clone(tbl)
	local new = {}
	for k, v in pairs(tbl) do
		new[k] = typeof(v) == "table" and clone(v) or v
	end
	return new
end

local function duplicatePet(petName)
	local Loads = require(game.ReplicatedStorage.Fsys).load
	local ClientData = Loads("ClientData")
	local InventoryDB = Loads("InventoryDB")
	local Inventory = ClientData.get("inventory")

	for _, pets in pairs(InventoryDB) do
		for id, item in pairs(pets) do
			if item.name:lower() == petName:lower() then
				local newItem = clone(item)
				local uuid = "uuid_" .. game.HttpService:GenerateGUID()
				newItem.unique = uuid
				newItem.category = "pets"
				newItem.properties = generate_props()
				newItem.newness_order = math.random(1, 999999)
				Inventory.pets = Inventory.pets or {}
				Inventory.pets[uuid] = newItem
				return
			end
		end
	end
end

Spawn.MouseButton1Click:Connect(function()
	if NameBox.Text ~= "" then
		duplicatePet(NameBox.Text)
	end
end)
