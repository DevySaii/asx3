local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

local petNameBox = script.Parent:WaitForChild("PetNameBox")
local spawnBtn = script.Parent:WaitForChild("SpawnBtn")
local tooltip = script.Parent:WaitForChild("Tooltip")
local rarityButtons = {
    NP = script.Parent:WaitForChild("NP"),
    R = script.Parent:WaitForChild("R"),
    F = script.Parent:WaitForChild("F"),
    FR = script.Parent:WaitForChild("FR"),
    Neon = script.Parent:WaitForChild("Neon"),
    NR = script.Parent:WaitForChild("NR"),
    NF = script.Parent:WaitForChild("NF"),
    NFR = script.Parent:WaitForChild("NFR"),
    M = script.Parent:WaitForChild("M"),
    MR = script.Parent:WaitForChild("MR"),
    MF = script.Parent:WaitForChild("MF"),
    MFR = script.Parent:WaitForChild("MFR"),
}

local currentSuffix = ""

-- Function to update tooltip text
local function updateTooltip(name, rarity, age)
    tooltip.Text = "Name: " .. name .. "\nRarity: " .. rarity .. "\nAge: " .. age
end

-- When a rarity button is clicked, update suffix
for key, button in pairs(rarityButtons) do
    button.MouseButton1Click:Connect(function()
        currentSuffix = key
        print("Selected suffix:", key)
    end)
end

-- Spawning function
local function spawnPet()
    local baseName = petNameBox.Text
    if baseName == "" then return end

    local fullName = baseName .. (currentSuffix ~= "" and " " .. currentSuffix or "")
    local petModel = ReplicatedStorage:FindFirstChild("Pets"):FindFirstChild(baseName)

    if petModel and petModel:IsA("Model") then
        local clonedPet = petModel:Clone()
        local rootPart = clonedPet.PrimaryPart or clonedPet:FindFirstChild("HumanoidRootPart") or clonedPet:FindFirstChildWhichIsA("BasePart")

        if rootPart then
            clonedPet:SetPrimaryPartCFrame(character.HumanoidRootPart.CFrame * CFrame.new(3, 0, 0))
            clonedPet.Parent = workspace
            updateTooltip(fullName, currentSuffix ~= "" and currentSuffix or "Normal", "Newborn")
        else
            warn("Pet model is missing a PrimaryPart!")
            updateTooltip("Error", "No PrimaryPart", "-")
        end
    else
        updateTooltip(baseName, "Not Found", "-")
        warn("Pet model not found in ReplicatedStorage.Pets")
    end
end

-- Spawn button clicked
spawnBtn.MouseButton1Click:Connect(spawnPet)
